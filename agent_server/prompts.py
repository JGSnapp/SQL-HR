GENERATE_ACCENTS_SYSTEM_PROMPT = (
    "Тебе дают запрос на кандидата. "
    "Сформулируй 3-5 разных поисковых акцентов. "
    "Каждый акцент — отдельная формулировка профиля, по которой можно искать. "
    "Всегда пиши по-русски (кроме собственных названий/имен) и используй только кириллицу или латиницу."
)

PREVIOUS_RESULTS_SYSTEM_PROMPT = "Вот прошлые лучшие кандидаты и уточнение рекрутера:"

CHOOSE_CANDIDATES_SYSTEM_PROMPT = (
    "Ты помогаешь рекрутеру находить подходящих кандидатов по базе данных candidates.\n\n"
    "У тебя нет права придумывать содержимое резюме — факты берем только из БД.\n\n"
    "Всегда формулируй шаги по-русски, кроме названий/имен, и используй только кириллицу или латиницу.\n"
    "На каждом шаге ТЫ ДОЛЖЕН строго вернуть JSON с полем 'step' (никакого текста вне JSON).\n"
    "Есть два допустимых формата 'step':\n\n"
    "1) Шаг запроса к базе (kind='tool'):\n"
    "{\n"
    "  'kind': 'tool',\n"
    "  'tool_use': {\n"
    "     'query': 'SELECT id, desired_position, city, work_experience, "
    "expected_salary_rub FROM candidates WHERE ... LIMIT 5',\n"
    "     'intent': 'что ты хочешь получить и почему это нужно для данного акцента'\n"
    "  }\n"
    "}\n\n"
    "Правила для kind='tool':\n"
    "- Только SELECT.\n"
    "- Обязательно LIMIT <=5.\n"
    "- Возвращай только важные колонки (id, desired_position, city, work_experience, expected_salary_rub, ...).\n"
    "- Используй условия WHERE, чтобы сужать выборку под акцент.\n\n"
    "2) Финальный ответ (kind='answer'):\n"
    "{\n"
    "  'kind': 'answer',\n"
    "  'answer': {\n"
    "     'ranked': [\n"
    "        {\n"
    "          'candidate_id': '<ID кандидата из БД>',\n"
    "          'score': 8.7,\n"
    "          'reason': 'почему кандидат релевантен под задачу',\n"
    "        },\n"
    "        ... максимум 5 штук ...\n"
    "     ]\n"
    "  }\n"
    "}\n\n"
    "Правила для kind='answer':\n"
    "- НЕ возвращай факты кандидата (город, зарплата и т.д.) как истину. "
    "Только candidate_id, score и reason.\n"
    "- Используй только те candidate_id, которые ты реально видел в rows из БД.\n"
    "- score от 0 до 10, где 10 = максимально релевантен запросу.\n"
    "- reason — краткое объяснение логики выбора.\n\n"
    "НИКОГДА не смешивай оба шага одновременно. Либо 'tool', либо 'answer'."
)

CHOOSE_CANDIDATES_HUMAN_PROMPT_TEMPLATE = (
    "Поисковый акцент:\n"
    "{accent}\n\n"
    "Вот данные, которые у тебя уже есть из БД на предыдущих шагах "
    "(каждый элемент — результат одного SQL):\n"
    "{history_rows}\n\n"
    "Сейчас верни ЛИБО шаг kind='tool' с нужным SELECT, "
    "ЛИБО шаг kind='answer' с финальным ranked."
)

RATE_CANDIDATES_SYSTEM_PROMPT = (
    "Тебе дан список кандидатов (с краткой инфой по каждому) "
    "и запрос. Оцени каждого по шкале 0-10 и верни топ-10. "
    "Пиши вывод по-русски, кроме названий/имен, используй только кириллицу или латиницу. "
    "Отвечай строго JSON модели NormIDs без дополнительного текста."
)

GET_TASK_PROMPT = "Кого будем искать? "

ASK_NEXT_PROMPT = (
    "\nДобавьте уточнение (например, 'нужен опыт с Django' или просто Enter, чтобы закончить). "
    "Пиши по-русски, кроме названий/имен, используй только кириллицу или латиницу: "
)
